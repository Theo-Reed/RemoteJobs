<view class="page">
  <view class="applied-jobs-list" wx:if="{{!loading && appliedJobs.length > 0}}">
    <view
      class="applied-job-item"
      wx:for="{{appliedJobs}}"
      wx:key="_id"
      bindtap="onJobTap"
      data-job-id="{{item.job_id}}"
      data-job-data="{{item.job_data}}"
    >
      <view class="job-item-header">
        <text class="job-title">{{item.job_title || (item.job_data && item.job_data.title) || ui.unknownJob}}</text>
        <view class="job-status">
          <text class="status-text status-{{item.status}}">
            {{item.status === 'pending' ? ui.pending : (item.status === 'processing' ? ui.processing : ui.completed)}}
          </text>
        </view>
      </view>
      <view class="job-item-meta">
        <text class="job-meta-text">{{item.job_data && item.job_data.source_name || ''}}</text>
        <text class="job-meta-text">{{item.job_data && item.job_data.salary || ''}}</text>
      </view>
      <view class="job-item-time">
        <text class="time-text">{{ui.appliedAt}}{{item.formattedAppliedAt || item.applied_at}}</text>
      </view>
    </view>
  </view>

  <view class="empty-state" wx:if="{{!loading && appliedJobs.length === 0}}">
    <text class="empty-text">{{emptyText}}</text>
  </view>

  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-text">{{loadingText}}</text>
  </view>
</view>

